---
let history: { date: string; message: string }[] = [];

if (typeof window !== "undefined") {
  history = JSON.parse(localStorage.getItem("love-message-history") || "[]");
}
---

<div class="bg-gradient-to-br from-love-400 to-love-500 text-white rounded-2xl p-6 shadow-lg relative overflow-hidden">
  <!-- today messages -->
  {history.length > 0 && (
    <div class="relative z-10 mb-6">
      <div class="text-center mb-4">
        <div class="text-sm opacity-90 mb-1">
          {new Date(history[0].date).toLocaleDateString('es-ES', { 
            weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
          })}
        </div>
        <h2 class="text-xl font-bold">ðŸ’Œ Hoy</h2>
      </div>
      <div class="bg-white/20 backdrop-blur-sm rounded-xl p-4 text-center">
        <p class="text-lg leading-relaxed font-medium">
          {history[0].message}
        </p>
      </div>
    </div>
  )}

  <!-- last 10 messages -->
  {history.length > 1 && (
    <div class="bg-white/10 rounded-xl p-4">
      <h3 class="font-semibold mb-2">ðŸ’ž Esto te dedico a ti...</h3>
      <ul class="space-y-2 text-sm">
        {history.map((h, idx) => (
          <li>
            <span class="opacity-70">
              {new Date(h.date).toLocaleDateString("es-ES")}
            </span> â€” {h.message}
          </li>
        ))}
      </ul>
    </div>
  )}
</div>